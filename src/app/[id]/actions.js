// app/posts/[id]/actions.js
"use server"; // ðŸ‘ˆ Ø§ÛŒÙ† Ø®Ø· Ø±Ùˆ Ø­ØªÙ…Ø§Ù‹ Ø¨Ø°Ø§Ø±ÛŒØ¯

import { db } from "@/app/lib/db/mysql"; // Ù…Ø³ÛŒØ± ØµØ­ÛŒØ­ Ø¯ÛŒØªØ§Ø¨ÛŒØ³

export async function incrementView(postId) {
  try {
    await db.query("UPDATE posts SET view = view + 1 WHERE ID = ?", [postId]);
    const [view] = await db.query(`select view from posts where ID= ?`, [
      postId,
    ]);
    return view[0].view;
  } catch (error) {
    console.error(`Error incrementing view for post ID ${postId}:`, error);
    return 0;
  }
}
